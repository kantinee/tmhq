<html>
    <head>
         <link href="css/bootstrap.min.css" rel="stylesheet"> 
         <link rel="icon"  type="image/icon"  href="Node.ico" />
         <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
         <script>
             function newDoc(xurl) {
                 window.location.assign(xurl)
             }
         </script>
         <script type="text/javascript">
             $(document).ready(function(){
                 $('[data-toggle="tooltip"]').tooltip();   
             });
         </script>
    </head>
    <body ng-app="postgreSQL">
        <div class="container" style="margin-top:20px;"  ng-controller="postgreSQLCtrl">
            <div class="row clearfix">
                <div class="col-md-12 column">
                    <div class="jumbotron">
                        <h1>
                            TMHQ  
                        </h1>
                        <h3>แบบวัดสุขภาพจิตในคนไทย ด้านภาวะซึมเศร้า (ในรูปแบบ Questionnaire)</h3>
                        <p><br /><br />
                            <h4>"ในช่วง 1 เดือนที่ผ่านมา" ว่าท่านมีอาการดังต่อไปนี้หรือไม่</h4>
                            <h5>-------------------------------------------------------------------------------------------------------------------------------------------------------------
                            <br/><b>ไม่มี</b>                 หมายถึง    ท่านไม่เคยมีหรือไม่เคยรู้สึกเลยในตลอดช่วงระยะเวลา 1 เดือน
                            <br/><b>เล็กน้อย</b>              หมายถึง    ท่านเคยมีหรือเคยรู้สึก คือประมาณครั้งหรือสองครั้งในช่วง 1 เดือน
                            <br/><b>ปานกลาง</b>             หมายถึง    ท่านเคยมีหรือเคยรู้สึกพอประมาณ คือประมาณ สัปดาห์ละครั้ง
                            <br/><b>ค่อนข้างมาก</b>           หมายถึง    ท่านเคยมีหรือเคยรู้สึกหลายๆ ครั้งใน 1 สัปดาห์
                            <br/><b>มาก</b>                 หมายถึง    ท่านเคยมีหรือเคยรู้สึกบ่อยมาก คือเกือบทุกวัน
                            <br/>-------------------------------------------------------------------------------------------------------------------------------------------------------------
                            </h5>
                           
                            <h5><i>** ใช้เวลาประมาณ 5 นาที ข้อมูลทุกอย่างจะถูกเก็บเป็นความลับ **</i></h5>
                            <h5><i>หมายเหตุ : โครงการนี้ได้รับการสนับสนุนจากทุนInnovation_Hub เพื่อการพัฒนา Aging Society ตามนโยบายประเทศไทย 4.0 ภายใต้การดูแลของ ม.มหิดล</i></h5>

                            <a class="pull-right" href="https://tmhq-jubjai.herokuapp.com/">ทีมงาน Jubjai</a> 
                        </p>

                    </div>
                </div>
            </div>
            
            <div class="row clearfix" style="margin-bottom:10px;">
                <div class="controls form-inline form-group">
                    
                    <table border=0 align="center" >
                        <tr>
                            <td >1. ฉันรู้สึกเศร้า</td>                            
                            <td width="10%"><input type="radio" ng-model="q1" value="1" data-toggle="tooltip" title="ไม่เศร้าเลย"  data-placement="left">ไม่มี</td>
                            <td width="10%"><input type="radio" ng-model="q1" value="2">เล็กน้อย</td>
                            <td width="10%"><input type="radio" ng-model="q1" value="3">ปานกลาง</td>
                            <td width="10%"><input type="radio" ng-model="q1" value="4">ค่อนข้างมาก</td>
                            <td width="10%"><input type="radio" ng-model="q1" value="5">มาก</td>
                        </tr>
                        <tr>
                            <td>2. ฉันรู้สึกไม่มีสมาธิกับงานหรือสิ่งต่างๆที่ทำในชีวิตประจำวัน</td>
                            <td><input type="radio" ng-model="q2" value="1"  >ไม่มี </td>
                            <td><input type="radio" ng-model="q2" value="2">เล็กน้อย</td>
                            <td><input type="radio" ng-model="q2" value="3">ปานกลาง</td>
                            <td><input type="radio" ng-model="q2" value="4">ค่อนข้างมาก</td>
                            <td><input type="radio" ng-model="q2" value="5">มาก</td>
                        </tr>
                        <tr>
                            <td>3. ฉันรู้สึกหมดความสนใจกับงานอดิเรกที่เคยมี</td>
                            <td><input type="radio" ng-model="q3" value="1" >ไม่มี</td>
                            <td><input type="radio" ng-model="q3" value="2">เล็กน้อย</td>
                            <td><input type="radio" ng-model="q3" value="3">ปานกลาง</td>
                            <td><input type="radio" ng-model="q3" value="4">ค่อนข้างมาก</td>
                            <td><input type="radio" ng-model="q3" value="5">มาก</td>
                        </tr>
                        <tr>
                            <td>4. ฉันรู้สึกไม่สนุกกับสิ่งต่างๆ เหมือนเช่นเคย</td>
                            <td><input type="radio" ng-model="q4" value="1">ไม่มี</td>
                            <td><input type="radio" ng-model="q4" value="2">เล็กน้อย</td>
                            <td><input type="radio" ng-model="q4" value="3">ปานกลาง</td>
                            <td><input type="radio" ng-model="q4" value="4">ค่อนข้างมาก</td>
                            <td><input type="radio" ng-model="q4" value="5">มาก</td>
                        </tr>
                        <tr>
                                <td>5. น้ำหนักของฉันลดลง 1-2 กิโลกรัม ในช่วง 1 เดือนที่ผ่านมา <br/>โดยที่ฉันไม่ได้พยายามควบคุมหรือมีการ เจ็บป่วยทางร่างกาย</td>
                                <td><input type="radio" ng-model="q5" value="1">ไม่มี</td>
                                <td><input type="radio" ng-model="q5" value="2">เล็กน้อย</td>
                                <td><input type="radio" ng-model="q5" value="3">ปานกลาง</td>
                                <td><input type="radio" ng-model="q5" value="4">ค่อนข้างมาก</td>
                                <td><input type="radio" ng-model="q5" value="5">มาก</td>
                        </tr>
                        <tr>
                                <td>6. ฉันรู้สึกเบื่อหน่ายและท้อแท้</td>
                                <td><input type="radio" ng-model="q6" value="1">ไม่มี</td>
                                <td><input type="radio" ng-model="q6" value="2">เล็กน้อย</td>
                                <td><input type="radio" ng-model="q6" value="3">ปานกลาง</td>
                                <td><input type="radio" ng-model="q6" value="4">ค่อนข้างมาก</td>
                                <td><input type="radio" ng-model="q6" value="5">มาก</td>
                        </tr>
                        <tr>
                                <td>7. ฉันรู้สึกเชื่องช้าและเซื่องซึมไม่อยากทำอะไร</td>
                                <td><input type="radio" ng-model="q7" value="1">ไม่มี</td>
                                <td><input type="radio" ng-model="q7" value="2">เล็กน้อย</td>
                                <td><input type="radio" ng-model="q7" value="3">ปานกลาง</td>
                                <td><input type="radio" ng-model="q7" value="4">ค่อนข้างมาก</td>
                                <td><input type="radio" ng-model="q7" value="5">มาก</td>
                            </tr>
                       <tr>
                            <td>8. การนอนของฉันผิดปกติและรบกวนฉัน</td>
                            <td><input type="radio" ng-model="q8" value="1">ไม่มี</td>
                            <td><input type="radio" ng-model="q8" value="2">เล็กน้อย</td>
                            <td><input type="radio" ng-model="q8" value="3">ปานกลาง</td>
                            <td><input type="radio" ng-model="q8" value="4">ค่อนข้างมาก</td>
                            <td><input type="radio" ng-model="q8" value="5">มาก</td>
                        </tr>
                        <tr>
                                <td>9. ฉันใช้เวลามากกว่าเดิมในการนอนตอนกลางคืน</td>
                                <td><input type="radio" ng-model="q9" value="1">ไม่มี</td>
                                <td><input type="radio" ng-model="q9" value="2">เล็กน้อย</td>
                                <td><input type="radio" ng-model="q9" value="3">ปานกลาง</td>
                                <td><input type="radio" ng-model="q9" value="4">ค่อนข้างมาก</td>
                                <td><input type="radio" ng-model="q9" value="5">มาก</td>
                            </tr>
                       <tr>
                            <td>10. ฉันรู้สึกหมดกำลังใจ</td>
                            <td><input type="radio" ng-model="q10" value="1">ไม่มี</td>
                            <td><input type="radio" ng-model="q10" value="2">เล็กน้อย</td>
                            <td><input type="radio" ng-model="q10" value="3">ปานกลาง</td>
                            <td><input type="radio" ng-model="q10" value="4">ค่อนข้างมาก</td>
                            <td><input type="radio" ng-model="q10" value="5">มาก</td>
                        </tr>
                       <tr>
                            <td>11. ฉันรู้สึกไม่มีค่าและละอายใจตนเอง</td>
                            <td><input type="radio" ng-model="q11" value="1">ไม่มี</td>
                            <td><input type="radio" ng-model="q11" value="2">เล็กน้อย</td>
                            <td><input type="radio" ng-model="q11" value="3">ปานกลาง</td>
                            <td><input type="radio" ng-model="q11" value="4">ค่อนข้างมาก</td>
                            <td><input type="radio" ng-model="q11" value="5">มาก</td>
                        </tr>
                       <tr>
                            <td>12. ฉันรู้สึกผิดเกือบตลอดเวลา</td>
                            <td><input type="radio" ng-model="q12" value="1">ไม่มี</td>
                            <td><input type="radio" ng-model="q12" value="2">เล็กน้อย</td>
                            <td><input type="radio" ng-model="q12" value="3">ปานกลาง</td>
                            <td><input type="radio" ng-model="q12" value="4">ค่อนข้างมาก</td>
                            <td><input type="radio" ng-model="q12" value="5">มาก</td>
                        </tr>
                       <tr>
                            <td>13. ฉันกำลังถูกลงโทษจากการกระทำที่ไม่ดีของตนเอง</td>
                            <td><input type="radio" ng-model="q13" value="1">ไม่มี</td>
                            <td><input type="radio" ng-model="q13" value="2">เล็กน้อย</td>
                            <td><input type="radio" ng-model="q13" value="3">ปานกลาง</td>
                            <td><input type="radio" ng-model="q13" value="4">ค่อนข้างมาก</td>
                            <td><input type="radio" ng-model="q13" value="5">มาก</td>
                        </tr>
                       <tr>
                            <td>14. ฉันรู้สึกด้อยเมื่อเปรียบเทียบกับคนอื่น</td>
                            <td><input type="radio" ng-model="q14" value="1">ไม่มี</td>
                            <td><input type="radio" ng-model="q14" value="2">เล็กน้อย</td>
                            <td><input type="radio" ng-model="q14" value="3">ปานกลาง</td>
                            <td><input type="radio" ng-model="q14" value="4">ค่อนข้างมาก</td>
                            <td><input type="radio" ng-model="q14" value="5">มาก</td>
                        </tr>
                       <tr>
                            <td>15. ฉันรู้สึกว่าชีวิตทุกวันนี้ของฉันไม่มีประโยชน์</td>
                            <td><input type="radio" ng-model="q15" value="1">ไม่มี</td>
                            <td><input type="radio" ng-model="q15" value="2">เล็กน้อย</td>
                            <td><input type="radio" ng-model="q15" value="3">ปานกลาง</td>
                            <td><input type="radio" ng-model="q15" value="4">ค่อนข้างมาก</td>
                            <td><input type="radio" ng-model="q15" value="5">มาก</td>
                        </tr>
                       <tr>
                            <td>16. ฉันรู้สึกไม่มีความสุขเลย</td>
                            <td><input type="radio" ng-model="q16" value="1">ไม่มี</td>
                            <td><input type="radio" ng-model="q16" value="2">เล็กน้อย</td>
                            <td><input type="radio" ng-model="q16" value="3">ปานกลาง</td>
                            <td><input type="radio" ng-model="q16" value="4">ค่อนข้างมาก</td>
                            <td><input type="radio" ng-model="q16" value="5">มาก</td>
                        </tr>
                       <tr>
                            <td>17. ฉันรู้สึกสิ้นหวัง</td>
                            <td><input type="radio" ng-model="q17" value="1">ไม่มี</td>
                            <td><input type="radio" ng-model="q17" value="2">เล็กน้อย</td>
                            <td><input type="radio" ng-model="q17" value="3">ปานกลาง</td>
                            <td><input type="radio" ng-model="q17" value="4">ค่อนข้างมาก</td>
                            <td><input type="radio" ng-model="q17" value="5">มาก</td>
                        </tr>
                       <tr>
                            <td>18. อนาคตของฉันมืดมน</td>
                            <td><input type="radio" ng-model="q18" value="1">ไม่มี</td>
                            <td><input type="radio" ng-model="q18" value="2">เล็กน้อย</td>
                            <td><input type="radio" ng-model="q18" value="3">ปานกลาง</td>
                            <td><input type="radio" ng-model="q18" value="4">ค่อนข้างมาก</td>
                            <td><input type="radio" ng-model="q18" value="5">มาก</td>
                        </tr>
                       <tr>
                            <td>19. ฉันรู้สึกว่าชีวิตไม่มีค่าควรแก่การอยู่ต่อ</td>
                            <td><input type="radio" ng-model="q19" value="1">ไม่มี</td>
                            <td><input type="radio" ng-model="q19" value="2">เล็กน้อย</td>
                            <td><input type="radio" ng-model="q19" value="3">ปานกลาง</td>
                            <td><input type="radio" ng-model="q19" value="4">ค่อนข้างมาก</td>
                            <td><input type="radio" ng-model="q19" value="5">มาก</td>
                        </tr>
                       <tr>
                            <td>20. ความตายเป็นทางออกที่ดีที่สุดสำหรับฉัน</td>
                            <td><input type="radio" ng-model="q20" value="1">ไม่มี</td>
                            <td><input type="radio" ng-model="q20" value="2">เล็กน้อย</td>
                            <td><input type="radio" ng-model="q20" value="3">ปานกลาง</td>
                            <td><input type="radio" ng-model="q20" value="4">ค่อนข้างมาก</td>
                            <td><input type="radio" ng-model="q20" value="5">มาก</td>
                        </tr>
                       
                        <tr height="100">
                            <td colspan="6" align="center"><button ng-click="verifydata()" id="btnAdd" name="btnAdd" class="btn btn-danger">บันทึก</button></td>
                        </tr>
                       
                    </table>               
                                  
                        
                   
                  
            </div>                    
                </div>
            </div>
            
            
        </div>
        
        <script src="lib/angular.min.js"></script>
        <script> 
            var myApp = angular.module('postgreSQL',[ ]);  
            var val = window.location.href.toString().split('=')[1];            
            myApp.controller('postgreSQLCtrl', ['$scope' ,'$http',  function($scope,$http) {
                $scope.val1 = 'This is temp Val' ;  
                $scope.fName = '';
                $scope.lName = '';
                $scope.email = '';  
                $scope.mbl = '' ;    
                $scope.q1 = '' ;
                $scope.q2 = '' ;   
                $scope.q3 = '' ;
                $scope.q4 = '' ;
                $scope.q5 = '' ;
                $scope.q6 = '' ;
                $scope.q7 = '' ;
                $scope.q8 = '' ;
                $scope.q9 = '' ;
                $scope.q10 = '' ;
                $scope.q11 = '' ;
                $scope.q12 = '' ;
                $scope.q13 = '' ;
                $scope.q14 = '' ;
                $scope.q15 = '' ;
                $scope.q16 = '' ;
                $scope.q17 = '' ;
                $scope.q18 = '' ;
                $scope.q19 = '' ;
                $scope.q20 = '' ;          
                $scope.getAllRec = function(){ 
                     
                     $http({method: 'GET', url: '/db/readRecords'}).
                        success(function(data, status) { 
                              $scope.dataset = data; 
                                                           
                        }).
                        error(function(data, status) {
                          $scope.dataset = data || "Request failed "; 
                      }); 
                } 

                
                $scope.verifydata = function(){ 
                    //alert($scope.q1);
                    if ($scope.q1!='') 
                        if ($scope.q2!='')
                            if ($scope.q3!='')
                                if ($scope.q4!='')
                                    if ($scope.q5!='')
                                        if ($scope.q6!='')
                                            if ($scope.q7!='')
                                                if ($scope.q8!='')
                                                    if ($scope.q9!='')
                                                        if ($scope.q10!='')
                                                            if ($scope.q11!='')
                                                                if ($scope.q12!='')
                                                                    if($scope.q13!='')
                                                                        if($scope.q14!='')
                                                                            if ($scope.q15!='')
                                                                                if ($scope.q16!='')
                                                                                    if ($scope.q17!='')
                                                                                        if ($scope.q18!='')
                                                                                            if ($scope.q19!='')
                                                                                                if ($scope.q20!='')
                                                                                                    $scope.addRecord(); 
                                                                                                else 
                                                                                                    alert('Please select Q20');
                                                                                            else    
                                                                                                alert('Please select Q19');
                                                                                        else 
                                                                                            alert('Please select Q18');
                                                                                    else 
                                                                                        alert('Please select Q17');
                                                                                else 
                                                                                    alert('Please select Q16');
                                                                            else 
                                                                                alert('Please select Q15');
                                                                        else 
                                                                            alert('Please select Q14');
                                                                    else 
                                                                        alert('Please select Q13');
                                                                else 
                                                                    alert('Please select Q12');
                                                            else 
                                                                alert('Please select Q11');
                                                        else 
                                                            alert('Please select Q10');
                                                    else 
                                                        alert('Please select Q9');
                                                else 
                                                    alert('Please select Q8');
                                            else 
                                                alert('Please select Q7');
                                        else 
                                            alert('Please select Q6');
                                    else 
                                        alert('Please select Q5');
                                else 
                                    alert('Please select Q4');
                            else 
                                alert('Please select Q3');
                        else 
                            alert('Please select Q2');
                    else 
                        alert('Please select Q1');
           
                }
                
                
                $scope.addRecord = function(){ 
                                   
                     $http({method: 'GET', url: '/db/addRecord?q1='+$scope.q1+'&q2='+$scope.q2+'&q3='+ $scope.q3 +'&q4='+$scope.q4+'&q5='+$scope.q5+'&q6='+$scope.q6+'&q7='+$scope.q7+'&q8='+$scope.q8+'&q9='+$scope.q9+'&q10='+$scope.q10+'&q11='+$scope.q11+'&q12='+$scope.q12+'&q13='+$scope.q13+'&q14='+$scope.q14+'&q15='+$scope.q15+'&q16='+$scope.q16+'&q17='+$scope.q17+'&q18='+$scope.q18+'&q19='+$scope.q19+'&q20='+$scope.q20+'&fName='+val }).
                        success(function(data, status) { 
                            alert('Record Added');
                            //alert('/db/addRecord?fName='+$scope.fName+'&lName='+$scope.lName+'&email='+$scope.email+'&mbl='+$scope.mbl+'&q1='+$scope.q1+'&q2='+$scope.q2)
                            //$scope.getAllRec();
                            //$http({method: 'GET', url: '/thankyou'}) //error here
                            var dname = 0;
                            dname = val.length % 2;
                            if (dname == 0){
                                //alert('forward feedback')
                                //$http({method: 'GET', url: '/feedback/'+ val })}
                                newDoc('/feedback/'+ val);}
                            else {
                                //alert('forward JubjaiBot')
                                //$http({method: 'GET', url: '/JubjaiBot'}); }
                                newDoc('/JubjaiBot');}
                            }); 
                
                }
                
                $scope.delRecord = function(recId){
                    console.log(recId);
                    if(confirm('Are you sure you want to delete this record ? '))
                    {
                        $http({method: 'GET', url: '/db/delRecord?id='+recId}).
                            success(function(data, status) {  
                                    $scope.getAllRec();
                            });
                    }
                } 
                
                $scope.getAllRec();
                
            }]);
 
        </script>
        
    </body>
    
</html>